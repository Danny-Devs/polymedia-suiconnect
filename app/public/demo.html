<!DOCTYPE html>
<html>
<head>
    <title>SuiConnect Demo</title>
    <!-- Load SuiConnect CSS -->
    <link rel="stylesheet" href="https://60903fae.polymedia-suiconnect.pages.dev/assets/index-Ci8EKbxv.css">
</head>
<body>
    <h2>SuiConnect Demo</h2>

    <!-- The wallet button will appear here -->
    <div id="suiconnect-root"></div>

    <!-- Load SuiConnect -->
    <script defer src="https://60903fae.polymedia-suiconnect.pages.dev/assets/index-CRCV8YET.js" onload="window.suiconnectInit()"></script>

    <script>
        // Handle wallet connections
        window.addEventListener("suiconnect-wallet-change", (event) => {
            const {
                address,
                client,
                signTransaction,
                signAndExecuteTransaction,
                signPersonalMessage,
                Transaction,
            } = event.detail;

            // address is a string or null when not connected
            console.log("[handler] connected wallet:", address);

            // client is a SuiClient instance
            client.getLatestSuiSystemState().then(state => {
                console.log("[handler] current epoch:", state.epoch);
            });

            if (!address) return;

            // prompt the user to sign a message with their wallet
            signPersonalMessage({
                message: new TextEncoder().encode("Hey hey hey SuiConnect!"),
            }).then(result => {
                console.log("[handler] sign success:", result);
            }).catch(error => {
                console.error("[handler] sign failed:", error);
            });

            // prompt the user to approve a transaction with their wallet

        });
    </script>
</body>
</html>
